ntp_timezone: Etc/UTC

apt_packages_default:
  build-essential: "{{ apt_package_state }}"
  cron: "{{ apt_package_state }}"
  curl: "{{ apt_package_state }}"
  dbus: "{{ apt_package_state }}"
  ghostscript: "{{ apt_package_state }}"
  git: "{{ apt_package_state }}"
  imagemagick: "{{ apt_package_state }}"
  libgs-dev: "{{ apt_package_state }}"
  libnss-myhostname: "{{ apt_package_state }}"
  python3: "{{ apt_package_state }}"
  python3-software-properties: "{{ apt_package_state }}"
  python3-mysqldb: "{{ apt_package_state }}"
  python3-pycurl: "{{ apt_package_state }}"
  unzip: "{{ apt_package_state }}"

apt_packages_custom: {}
apt_packages: "{{ apt_packages_default | combine(apt_packages_custom) }}"

openssh_6_8_plus: "{{ (lookup('pipe', 'ssh -V 2>&1')) | regex_replace('(.*OpenSSH_([\\d\\.]*).*)', '\\2') is version_compare('6.8', '>=') }}"
overlapping_ciphers: "{{ (sshd_ciphers_default + sshd_ciphers_extra) | intersect(ssh_client_ciphers) }}"
overlapping_kex: "{{ (sshd_kex_algorithms_default + sshd_kex_algorithms_extra) | intersect(ssh_client_kex) }}"
overlapping_macs: "{{ (sshd_macs_default + sshd_macs_extra) | intersect(ssh_client_macs) }}"
host_key_types: "{{ sshd_host_keys | map('regex_replace', '/etc/ssh/ssh_host_(.+)_key', '\\1') | map('regex_replace', 'dsa', 'ssh-dss') | list }}"
overlapping_host_keys: "{{ host_key_types | intersect(ssh_client_host_key_algorithms) | join(',') }}"
